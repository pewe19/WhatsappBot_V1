var list_container,lastMsg,msgInput,cache=[],cacheLimit=phrases.length,diff=!1,chosenPhrase=0;count=0;const eventInput=new InputEvent("input",{bubbles:!0}),getTime=()=>new Date(Date.now()).getHours();function randInt(e,n){return e=Math.ceil(e),n=Math.floor(n),Math.floor(Math.random()*(n-e+1))+e}function isDiff(e,n){for(i=0;i<n.length;i++)if(n[i]==e)return!1;return!0}function selectPhrase(){diff=!1;let e=0;for(;!diff;)chosenPhrase=randInt(0,phrases.length),diff=!!isDiff(chosenPhrase,cache),e++,100==e&&(diff=!0)}function checkcache(){(cache.length<cacheLimit?cache:cache=[]).push(chosenPhrase),console.log("valor de cache: ",cache)}function sendMsg(e){e.dispatchEvent(eventInput),e.dispatchEvent(eventInput),e.dispatchEvent(eventInput),setTimeout(()=>{document.querySelector("button._4sWnG").click()},500)}function writeAndSendMsg(e){msgInput.textContent=e,sendMsg(msgInput)}function sendScheduledMessages(n){let e=schePhrases.filter(e=>Number(e.time)==n);e.forEach(e=>setTimeout(()=>writeAndSendMsg(e.phrase),2e3))}function whatsappBot(){let e=getTime();console.groupCollapsed("Message ["+count+"]"),console.log("======================================="),console.log("\nSelecting Message... \n\n"),onlyRandom&&(selectPhrase(),checkcache()),console.log("\tChosen phrase: "+phrases[chosenPhrase]),console.log("\tWriting..."),onlyScheduled&&everyS<=36e5?scheTime.includes(e.toString())?sendScheduledMessages(e):writeAndSendMsg(phrases[chosenPhrase]):onlyRandom&&writeAndSendMsg(phrases[chosenPhrase]),console.log("\n\n Sent!"),count++,console.groupEnd()}function stopBot(){clearInterval(bot),console.log("Bot stoped"),count=0}function startBot(){var e;onlyRandom&&(console.groupCollapsed("Message ["+count+"]"),console.log("======================================="),console.log("\nSelecting Message... \n\n"),selectPhrase(),checkcache(),console.log("\tChosen phrase: "+phrases[10]),console.log("\tWriting..."),writeAndSendMsg(phrases[chosenPhrase]),console.log("\n\n Sent!"),console.groupEnd()),onlyScheduled&&(e=getTime(),everyS<=36e5?(console.log("agendado"),scheTime.includes(e)&&sendScheduledMessages(e)):(alert("You MUST select less than 1 hour between messages on 'onlyScheduled' mode!"),alert("The bot wont send scheduled messages until you change the time or disable the onlyschedule mode"))),bot=setInterval(whatsappBot,everyS),console.log("Bot Initialized")}function checkInput(e,n){isReady=setInterval(()=>{void 0!==msgInput&&void 0!==list_container?(console.groupCollapsed("check Input"),console.log("Found input"),console.log(msgInput),console.groupEnd(),n&&startAI(),e&&startBot(),clearInterval(isReady)):(list_container=document.querySelector('[aria-label="Message list. Press right arrow key on a message to open message context menu."]'),document.querySelectorAll("._13NKt.copyable-text.selectable-text").forEach(e=>{e.hasAttribute("spellcheck")&&(msgInput=e)}))},2e3)}function startAI(){list_container.addEventListener("DOMNodeInserted",e=>getLastMsg(e),!1)}function getLastMsg(e){let n=e.target;n==list_container.lastElementChild&&n.classList.toString().includes("message-in focusable-list-item")&&answerMsg(lastMsg=n.innerText.slice(0,n.innerText.lastIndexOf("\n")))}var lastMsgSent=void 0;function answerMsg(e){let n=e.toString().toLowerCase(),s=!1;n.includes("hey, ")&&chats.forEach((t,e)=>{n.includes(t.ask.toLowerCase())&&(setTimeout(()=>{let e=randInt(0,t.answers.length),n={value:!0,count:0};if(null!=lastMsgSent)for(;e==lastMsgSent&&n;)e=randInt(0,t.answers.length),n.count++,100==n.count&&(n.value=!1);e!=lastMsgSent&&(lastMsgSent=e),writeAndSendMsg(t.answers[e])},1e3),s=!0)}),s||setTimeout(()=>{writeAndSendMsg("Sorry, try another question :(")},3e3)}function main(){onlyRandom||onlyScheduled&&autoMode?checkInput(!0,!0):onlyRandom||onlyScheduled||!autoMode?onlyRandom||onlyScheduled||autoMode||alert("No mode selected!"):checkInput(!1,!0)}main();